# for installing the library: pip install python-telegram-bot
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import Application, CommandHandler, MessageHandler, filters, CallbackQueryHandler

# ØªÙˆÚ©Ù† Ø±Ø¨Ø§Øª Ø®ÙˆØ¯ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯. Ø§ÛŒÙ† ØªÙˆÚ©Ù† Ø±Ø§ Ø§Ø² BotFather Ø¯Ø± ØªÙ„Ú¯Ø±Ø§Ù… Ø¨Ú¯ÛŒØ±ÛŒØ¯
# Ø¨Ù‡ØªØ± Ø§Ø³Øª Ø§ÛŒÙ† ØªÙˆÚ©Ù† Ø±Ø§ Ø¯Ø± Ø¬Ø§ÛŒ Ø§Ù…Ù†ÛŒ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ú©Ù†ÛŒØ¯ Ùˆ Ù…Ø³ØªÙ‚ÛŒÙ… Ø¯Ø± Ú©Ø¯ Ù†Ù†ÙˆÛŒØ³ÛŒØ¯
BOT_TOKEN = "YOUR_BOT_TOKEN_HERE"

# Ø§ÛŒÙ† ØªØ§Ø¨Ø¹ Ø²Ù…Ø§Ù†ÛŒ Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ú©Ù‡ Ú©Ø§Ø±Ø¨Ø± Ø¯Ø³ØªÙˆØ± /start Ø±Ø§ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†Ø¯
async def start(update: Update, context):
    # Ø³Ø§Ø®Øª Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø´ÛŒØ´Ù‡â€ŒØ§ÛŒ (Ø²ÛŒØ± Ù¾ÛŒØ§Ù…)
    keyboard = [
        [InlineKeyboardButton("Ú¯Ø²ÛŒÙ†Ù‡ Ø§ÙˆÙ„ ğŸ¥‡", callback_data='option_1')],
        [InlineKeyboardButton("Ú¯Ø²ÛŒÙ†Ù‡ Ø¯ÙˆÙ… ğŸ¥ˆ", callback_data='option_2')],
        [InlineKeyboardButton("Ø±Ø§Ù‡Ù†Ù…Ø§ â“", callback_data='help')],
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)
    
    # Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø®ÙˆØ´Ø§Ù…Ø¯Ú¯ÙˆÛŒÛŒ Ø¨Ù‡ Ù‡Ù…Ø±Ø§Ù‡ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
    await update.message.reply_text(
        "Ø³Ù„Ø§Ù…! Ø¨Ù‡ Ø±Ø¨Ø§Øª Ù…Ù† Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯. Ù„Ø·ÙØ§ ÛŒÚ© Ú¯Ø²ÛŒÙ†Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:",
        reply_markup=reply_markup
    )

# Ø§ÛŒÙ† ØªØ§Ø¨Ø¹ Ø²Ù…Ø§Ù†ÛŒ Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ú©Ù‡ ÛŒÚ©ÛŒ Ø§Ø² Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø´ÛŒØ´Ù‡â€ŒØ§ÛŒ ÙØ´Ø§Ø± Ø¯Ø§Ø¯Ù‡ Ø´ÙˆØ¯
async def button_handler(update: Update, context):
    query = update.callback_query
    await query.answer()  # Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ø¹Ù„Ø§Ù…Øª Ø³Ø§Ø¹Øª Ú©Ù†Ø§Ø± Ø¯Ú©Ù…Ù‡ Ø§Ø² Ø¨ÛŒÙ† Ø¨Ø±ÙˆØ¯

    # Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¯Ú©Ù…Ù‡ ÙØ´Ø±Ø¯Ù‡ Ø´Ø¯Ù‡ØŒ ÛŒÚ© Ù¾Ø§Ø³Ø® Ù…ØªÙØ§ÙˆØª Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
    if query.data == 'option_1':
        await query.edit_message_text(text="Ø´Ù…Ø§ Ú¯Ø²ÛŒÙ†Ù‡ Ø§ÙˆÙ„ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø±Ø¯ÛŒØ¯.")
    elif query.data == 'option_2':
        await query.edit_message_text(text="Ø´Ù…Ø§ Ú¯Ø²ÛŒÙ†Ù‡ Ø¯ÙˆÙ… Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø±Ø¯ÛŒØ¯.")
    elif query.data == 'help':
        await query.edit_message_text(text="Ø§ÛŒÙ† ÛŒÚ© Ø±Ø¨Ø§Øª Ù†Ù…ÙˆÙ†Ù‡ Ø§Ø³Øª. Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯ /start Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯.")

# Ø§ÛŒÙ† ØªØ§Ø¨Ø¹ Ø¨Ù‡ Ù‡Ø± Ù¾ÛŒØ§Ù… Ù…ØªÙ†ÛŒ Ú©Ù‡ Ú©Ø§Ù…Ù†Ø¯ Ù†Ø¨Ø§Ø´Ø¯ØŒ Ù¾Ø§Ø³Ø® Ù…ÛŒâ€ŒØ¯Ù‡Ø¯
async def echo(update: Update, context):
    await update.message.reply_text(f"Ø´Ù…Ø§ Ù†ÙˆØ´ØªÛŒØ¯: {update.message.text}")


def main():
    # Ø³Ø§Ø®Øª Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø±Ø¨Ø§Øª
    application = Application.builder().token(BOT_TOKEN).build()

    # ØªØ¹Ø±ÛŒÙ Ø¯Ø³ØªÙˆØ±Ø§Øª Ùˆ í•¸ë“¤ëŸ¬Ù‡Ø§
    application.add_handler(CommandHandler("start", start))
    application.add_handler(CallbackQueryHandler(button_handler)) # Ø¨Ø±Ø§ÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø´ÛŒØ´Ù‡â€ŒØ§ÛŒ
    application.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, echo)) # Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ù…ØªÙ†ÛŒ

    # Ø´Ø±ÙˆØ¹ Ø¨Ù‡ Ú©Ø§Ø± Ø±Ø¨Ø§Øª
    print("Bot is running...")
    application.run_polling()

if __name__ == "__main__":
    main()